node {
    if (params.ENVIRONMENT == 'development') {
        stage('Notify All') {
            cleanWs()
            git branch: env.master_BRANCH, credentialsId: 'github', url: 'https://github.com/nrBaskar/dockeransiblejenkins.git'
            timestamps{
                sh label: '', script: '''
                    cd /var/lib/jenkins/workspace/$JOB_NAME
                    env.WORKSPACE = pwd()
                    def commitDetails = fetchLastCommitInfo(SPECIFIC_REVISION_ID);
                    def emailSubject = "Jenkins Notification: EVX Development pipeline triggered for Build ID #${env.BUILD_NUMBER}";
                    def emailBody = """
                        <p>Hi EVX DEV Team,</p>
                        <p>The EVX development pipeline has been triggered from Repo: ${env.EVX_GIT_REPO} for Branch: ${env.master}</p>
                        <p>Please find the last commit details below:</p>
                        <p>${commitDetails}</p>
                        <p>See attached diff of <b>${env.JOB_NAME} #${env.BUILD_NUMBER}</b>.</p>
                    <p>With Regards,</p>
                    <p>Sify Jenkins Admin</p>"""
                    def recipients = suther.sanjai@sifycorp.com
                    sendEmail(emailSubject, emailBody, recipients, true);
               }
        }
